<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <link rel="stylesheet" href="../css/bootstrap.min.css">
        <style>body {
                padding-top: 60px;
                padding-bottom: 40px;
            }
        </style>
        <link rel="stylesheet" href="../css/bootstrap-responsive.min.css">
        <link rel="stylesheet" href="../css/main.css">

        <script src="../js/vendor/modernizr-2.6.2-respond-1.1.0.min.js"></script>
    </head>
    <body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- This code is taken from http://twitter.github.com/bootstrap/examples/hero.html -->

        <div class="navbar navbar-inverse navbar-fixed-top">
            <div class="navbar-inner">
                <div class="container">
                    <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </a>
                    <a class="brand" href="../index.html">ITP DWD SPRING 2013</a>
                    <div class="nav-collapse collapse">
                        <ul class="nav">
                            <li class="active"><a href="../index.html">Home</a></li>
                            <!-- <li><a href="#about">About</a></li>
                            <li><a href="#contact">Contact</a></li>-->
                            <li class="dropdown">
                                <a href="week-7.html#" class="dropdown-toggle" data-toggle="dropdown">Notes <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="../page/cheatsheet.html">DWD Cheatsheet</a>
                                    </li>
                                  <li>
                                    <a href="week-1.html">
                                    Week 1 - Introduction to web development
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-2.html">
                                    Week 2 - JavaScript functions, events &amp; callbacks
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-3.html">
                                    Week 3 - Getting started with NodeJS &amp; Heroku
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-4.html">
                                    Week 4 - ExpressJS framework &amp; templates
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-5.html">
                                    Week 5 - Databases and MongoDB
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-6.html">
                                    Week 6 - More on Databases
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-7.html">
                                    Week 7 - Database review and form validation
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-8.html">
                                    Week 8 -  Introduction to API&#39;s &amp; JSON
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-9.html">
                                    Week 9 - Remote APIs, JSON and AJAX
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-10.html">
                                    Week 10 - Sessions and Cookies
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-11.html">
                                    Week 11 - Uploading files / Amazon S3
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-12.html">
                                    Week 12 - Websockets and real-time communication
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-13.html">
                                    Week 13 - Arduinos, Processing and JSON 
                                    </a>
                                  </li>
                                  <li>
                                    <a href="week-14.html">
                                    Week 14 - Final Presentations
                                    </a>
                                  </li>
                               <!--      <li><a href="#">Action</a></li>
                                    <li><a href="#">Another action</a></li>
                                    <li><a href="#">Something else here</a></li>
                                    <li class="divider"></li>
                                    <li class="nav-header">Nav header</li>
                                    <li><a href="#">Separated link</a></li>
                                    <li><a href="#">One more separated link</a></li> -->
                                </ul>
                            </li>
                            <li class="dropdown">
                                <a href="week-7.html#" class="dropdown-toggle" data-toggle="dropdown">Previous Classes <b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="http://itppyweb.herokuapp.com">Fall 2012 - Python</a>
                                    </li>
                                    <li>
                                        <a href="http://itpwebclassspring2012.herokuapp.com">Spring 2012 - NodeJS</a>
                                    </li>
                                </ul>
                            </li>
                            
                        </ul>
                        <form class="hide navbar-form pull-right">
                            <input class="span2" type="text" placeholder="Email">
                            <input class="span2" type="password" placeholder="Password">
                            <button type="submit" class="btn">Sign in</button>
                        </form>
                    </div><!--/.nav-collapse -->
                </div>
            </div>
        </div>

        <div class="container">

            <div class="row">

    <div class="span2">
        <div class="well">
            <a href="week-7.html#notes">Notes</a><br>
            <a href="week-7.html#assignment">Assignment</a>
        </div>
    </div>

    <div class="span10">
        <article>
            <header>
                <h1>Week 7 - Database review and form validation</h1>
            
            </header>
            
            <div class="intro">
                <p>Review schemas, models and MongoDB documents. Discuss queries and updating documents.</p>

<p>New today, form validation both server and client side.</p>
            </div>

            <hr>
            
            <section id="notes">
                <A href="https://github.com/johnschimmel/Heroku-ExpressJS-Boilerplate">Github repo</a><br>

<a href="http://itpdwdexpresstemplates.herokuapp.com">demo: itpdwdexpresstemplates.herokuapp.com</a>

<hr>

<h2 id="form-validation">Form validation</h2>

<p>Form validation ensures that the data going into your database from an HTML form or other source is valid. </p>

<p>Keeping your data clean protects your application from mischievous users and from your data breaking any process in your application. </p>

<h3 id="client-and-server-side">Client and Server side</h3>

<p>It is possible and appropriate to have both validation on the server side and the client side (browser). Server side will protect the data getting saved into the database and client side validation will help prompt the user that their form submission is incorrect before the form is submitted and allowing them to fix the issue.</p>

<h3 id="mongoosejs-model-validation">MongooseJS Model Validation</h3>

<p><a href="http://mongoosejs.com/docs/validation.html">MongooseJS Validation docs</a></p>

<p>Mongoose provides basic model validation that can be used <strong>when creating new documents</strong>. The validation is allows us to write custom functions to verify the data is correct before saving it into the MongoDB collection. </p>

<p>We implement server side in 3 different files,</p>

<ul>
<li><strong>models/astronaut.js</strong> - custom validation function for any property, (name, birthdate, photo, etc.)</li>
<li><strong>routes/index.js</strong> - during the initial .save() callback, may contain validation errors, redisplay the create form.</li>
<li><strong>views/create_form.html</strong> - add values to form elements and add error messages.</li>
</ul>

<p>Inside our models/astronaut.js model file let's create a custom validation function to ensure the name of the astronaut is at least 5 characters long.</p>

<p>models/astronaut.js</p>

<script src="https://gist.github.com/johnschimmel/5169116.js"></script>

<p>routes/index.js <br />
During the create .save() function, check for errors and redisplay the form if needed.</p>

<script src="https://gist.github.com/johnschimmel/5169178.js"></script>

<p>views/create_form.html <br />
Redisplay form with user input and field errors. Add in <strong>value=</strong> attributes and error messages.</p>

<script src="https://gist.github.com/johnschimmel/5169233.js"></script>

<h3 id="client-side-validation">Client side validation</h3>

<p>Client side validation with JavaScript can be tricky but luckily there are prebuilt jQuery plugins to use. </p>

<p><a href="http://bassistance.de/jquery-plugins/jquery-plugin-validation/">jQuery Validation</a> is a really good choice.</p>

<ul>
<li><a href="http://jquery.bassistance.de/validate/demo/">Demo</a></li>
<li><a href="http://jquery.bassistance.de/validate/jquery-validation-1.11.0.zip">Download</a></li>
<li><a href="http://docs.jquery.com/Plugins/Validation">Documentation</a></li>
<li><a href="https://github.com/jzaefferer/jquery-validation">Github</a></li>
</ul>

<h4 id="what-to-install">What to install</h4>

<ul>
<li>After <a href="http://jquery.bassistance.de/validate/jquery-validation-1.11.0.zip">downloading</a> open the <strong>dist</strong> directory. </li>
<li>Copy all the <strong>dist</strong> directory files to your app's <strong>/public/js</strong> folder.</li>
<li><p>Open <strong>/views/layout.html</strong>, just above the closing BODY tag, add the SCRIPT for jQuery Validate.</p>

<pre><code>&lt;script src="/js/jquery.validate.min.js"&gt;&lt;/script&gt;
&lt;script&gt;
    // when the page is loaded...
    jQuery(document).ready( function() {
        jQuery('form').validate(); // turn on validation for all forms
    });
&lt;/script&gt;
</code></pre></li>
<li><p>Save layout.html</p></li>
</ul>

<h4 id="update-html-forms">Update HTML forms</h4>

<p>If a form field is required </p>

<pre><code>&lt;input type="text" name="first_name" id="first_name" class="required" required&gt;
</code></pre>

<p>Or a require a valid email address</p>

<pre><code>&lt;input type="email" name="email" id="email" class="required email" required&gt;
</code></pre>

<p>Error messages are automatically placed next to the appropriate fields and can be styled with CSS. 
jQuery Validation allows for custom validator functions, <a href="http://docs.jquery.com/Plugins/Validation">read the documentation</a> for more information.</p>
            </section>
            <br>
            <hr>
            <br>
            <section id="assigment">
                <h1>Assignment</h1>
....
            </section>

            <section id="comments">
                <div id="disqus_thread"></div>
                <script type="text/javascript">
                    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
                    var disqus_shortname = 'itpdwdspring2013';

                    /* * * DON'T EDIT BELOW THIS LINE * * */
                    (function() {
                        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
                        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
                    })();
                </script>
                <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
            </section>


        </article>
        
    </div>

    
</div>

        </div> <!-- /container -->

        <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="/js/vendor/jquery-1.9.0.min.js"><\/script>')</script>

        <script src="http://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/2.2.2/bootstrap.min.js"></script>

        <script src="../js/main.js"></script>

        <script>
            var _gaq=[['_setAccount','UA-29253415-1'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body>
</html>
